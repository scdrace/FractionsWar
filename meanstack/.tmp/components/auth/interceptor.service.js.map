{"version":3,"sources":["../../../client/components/auth/interceptor.service.js"],"names":[],"mappings":"AAAA;;AAEA,CAAC,YAAW;;AAEZ,WAAS,eAAT,CAAyB,UAAzB,EAAqC,EAArC,EAAyC,QAAzC,EAAmD,SAAnD,EAA8D,IAA9D,EAAoE;AAClE,QAAI,KAAJ,CADkE;AAElE,WAAO;;;AAEL,gCAAQ,QAAQ;AACd,eAAO,OAAP,GAAiB,OAAO,OAAP,IAAkB,EAAlB,CADH;AAEd,YAAI,SAAS,GAAT,CAAa,OAAb,KAAyB,KAAK,YAAL,CAAkB,OAAO,GAAP,CAA3C,EAAwD;AAC1D,iBAAO,OAAP,CAAe,aAAf,GAA+B,YAAY,SAAS,GAAT,CAAa,OAAb,CAAZ,CAD2B;SAA5D;AAGA,eAAO,MAAP,CALc;OAFX;;;;AAWL,4CAAc,UAAU;AACtB,YAAI,SAAS,MAAT,KAAoB,GAApB,EAAyB;AAC3B,WAAC,UAAU,QAAQ,UAAU,GAAV,CAAc,QAAd,CAAR,CAAV,CAAD,CAA6C,EAA7C,CAAgD,OAAhD;;AAD2B,kBAG3B,CAAS,MAAT,CAAgB,OAAhB,EAH2B;SAA7B;AAKA,eAAO,GAAG,MAAH,CAAU,QAAV,CAAP,CANsB;OAXnB;KAAP,CAFkE;GAApE;;AAwBA,UAAQ,MAAR,CAAe,mBAAf,EACG,OADH,CACW,iBADX,EAC8B,eAD9B,EA1BY;CAAX,CAAD","file":"interceptor.service.js","sourcesContent":["'use strict';\n\n(function() {\n\nfunction authInterceptor($rootScope, $q, $cookies, $injector, Util) {\n  var state;\n  return {\n    // Add authorization token to headers\n    request(config) {\n      config.headers = config.headers || {};\n      if ($cookies.get('token') && Util.isSameOrigin(config.url)) {\n        config.headers.Authorization = 'Bearer ' + $cookies.get('token');\n      }\n      return config;\n    },\n\n    // Intercept 401s and redirect you to login\n    responseError(response) {\n      if (response.status === 401) {\n        (state || (state = $injector.get('$state'))).go('login');\n        // remove any stale tokens\n        $cookies.remove('token');\n      }\n      return $q.reject(response);\n    }\n  };\n}\n\nangular.module('meanstackApp.auth')\n  .factory('authInterceptor', authInterceptor);\n\n})();\n"]}